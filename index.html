<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The 7C's Luxury Retreat | Port Franks</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --primary: #1a2a3a; --accent: #c5a059; --bg: #f4f7f6; --text: #333; --white: #ffffff; }
        body { font-family: 'Helvetica Neue', Arial, sans-serif; margin: 0; background: var(--bg); color: var(--text); scroll-behavior: smooth; padding-bottom: 110px; }

        /* HERO & SYNCED BLUR */
        .hero-master-container { position: relative; width: 100%; overflow: hidden; background: #000; }
        .unified-blur-bg { position: absolute; top: -10%; left: -5%; right: -5%; bottom: -5%; width: 110%; height: 115%; background-size: cover; background-position: center; filter: blur(45px) brightness(0.4); z-index: 1; transition: background-image 1.2s ease-in-out; }
        .hero-viewport { position: relative; height: 85vh; width: 100%; display: flex; justify-content: center; align-items: center; z-index: 2; }
        .hero-main-img-container { position: relative; width: 92%; height: 85%; display: flex; justify-content: center; align-items: center; }
        .hero-main-img { max-width: 100%; max-height: 100%; object-fit: contain; box-shadow: 0 30px 70px rgba(0,0,0,0.7); opacity: 0; transition: opacity 1.2s ease-in-out; border-radius: 6px; }
        .hero-master-container.active .hero-main-img { opacity: 1; }
        .hero-content { position: absolute; top: 15px; left: 50%; transform: translateX(-50%); color: var(--white); text-align: center; padding: 20px 40px; border-radius: 10px; backdrop-filter: blur(20px); background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.25); z-index: 15; box-shadow: 0 15px 35px rgba(0,0,0,0.4); min-width: 300px; }
        .hero-content h1 { font-size: 2.8rem; margin: 0; letter-spacing: 1.5px; font-weight: 600; }

        /* RATINGS BAR */
        .ratings-bar { position: relative; z-index: 3; display: flex; justify-content: center; gap: 40px; padding: 40px 0 80px 0; }
        .rating-box { background: rgba(255, 255, 255, 0.98); padding: 30px 50px; border-radius: 15px; text-align: center; border-bottom: 5px solid var(--accent); box-shadow: 0 20px 40px rgba(0,0,0,0.25); display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 10px; min-width: 220px; }
        .rating-box img.logo-airbnb { height: 45px; width: auto; object-fit: contain; }
        .rating-box img.logo-vrbo { height: 90px; width: auto; max-width: 280px; object-fit: contain; }
        .score-value { font-size: 2rem; font-weight: bold; color: var(--primary); margin: 0; }
        .review-count-label { font-size: 0.9rem; color: #666; font-weight: 500; opacity: 0.8; }

        /* REVIEWS SLIDER (10 SECONDS) */
        .reviews-section { background: var(--primary); color: var(--white); padding: 120px 20px; text-align: center; }
        .review-container { max-width: 1000px; margin: auto; min-height: 200px; position: relative; display: flex; align-items: center; justify-content: center; }
        .review-text { position: absolute; width: 100%; opacity: 0; transition: 1.2s ease-in-out; font-style: italic; font-size: 1.4rem; line-height: 1.8; visibility: hidden; }
        .review-text.active { opacity: 1; visibility: visible; }
        .reviewer-meta { display: block; margin-top: 25px; color: var(--accent); font-weight: bold; font-style: normal; text-transform: uppercase; font-size: 0.95rem; letter-spacing: 2px; }

        /* DYNAMIC GALLERY FILTERS */
        .filter-bar { display: flex; justify-content: center; gap: 12px; margin-bottom: 40px; flex-wrap: wrap; }
        .filter-btn { padding: 12px 28px; border-radius: 50px; border: 1px solid #ddd; background: white; cursor: pointer; transition: 0.3s; font-weight: bold; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        .filter-btn.active { background: var(--primary); color: white; border-color: var(--primary); box-shadow: 0 6px 12px rgba(0,0,0,0.15); }

        /* GALLERY GRID */
        .container { max-width: 1250px; margin: auto; padding: 80px 20px; }
        .gallery-wrap { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px; }
        .gallery-wrap img { width: 100%; height: 280px; object-fit: cover; border-radius: 15px; cursor: pointer; transition: 0.4s; background: #eee; }
        .gallery-wrap img.hidden { display: none; }
        .more-photos-btn { display: block; margin: 50px auto; padding: 18px 55px; border: 2px solid var(--accent); background: none; border-radius: 60px; font-weight: bold; font-size: 1.1rem; cursor: pointer; color: var(--primary); }

        /* FLOATING NAV */
        .bottom-nav-bar { position: fixed; bottom: 0; left: 0; width: 100%; background: rgba(255,255,255,0.98); backdrop-filter: blur(15px); padding: 20px 0; box-shadow: 0 -10px 30px rgba(0,0,0,0.1); display: flex; justify-content: center; gap: 30px; z-index: 2000; }
        .action-link { padding: 14px 35px; border-radius: 50px; text-decoration: none; font-weight: bold; color: var(--white); display: flex; align-items: center; gap: 12px; box-shadow: 0 6px 18px rgba(0,0,0,0.2); }
        .btn-airbnb { background: #FF5A5F; }
        .btn-vrbo { background: #002f5d; }
        
        #scroll-up { position: fixed; bottom: 110px; right: 30px; background: var(--primary); color: var(--white); width: 55px; height: 55px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; opacity: 0; transition: 0.4s; z-index: 1500; }
        #scroll-up.active { opacity: 1; }

        /* LIGHTBOX */
        #photo-overlay { display: none; position: fixed; z-index: 5000; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.98); flex-direction: column; justify-content: center; align-items: center; }
        #full-img { max-width: 90%; max-height: 85vh; border: 5px solid var(--white); object-fit: contain; }
        .nav-arrow { position: absolute; top: 50%; color: white; font-size: 4rem; cursor: pointer; padding: 40px; transform: translateY(-50%); }

        @media (max-width: 768px) { .hero-viewport { height: 60vh; } .hero-content h1 { font-size: 1.6rem; } .ratings-bar { flex-direction: row; gap: 10px; padding: 20px 10px; } .rating-box { flex: 1; padding: 15px 5px; min-width: 0; } .rating-box img.logo-vrbo { height: 50px; } .rating-box img.logo-airbnb { height: 30px; } }
    </style>
</head>
<body>

<div class="hero-master-container" id="slideshow-anchor">
    <div class="unified-blur-bg" id="bg-blur-layer"></div>
    <section class="hero-viewport">
        <div class="hero-main-img-container">
            <div class="hero-content">
                <h1>The 7C's Luxury Retreat</h1>
                <p>Port Franks, Ontario — Your Private Sanctuary</p>
            </div>
            <img class="hero-main-img" id="featured-image" src="" alt="Cottage Exterior">
        </div>
    </section>
    <div class="ratings-bar">
        <div class="rating-box">
            <img src="https://upload.wikimedia.org/wikipedia/commons/6/69/Airbnb_Logo_Bélo.svg" class="logo-airbnb" alt="Airbnb">
            <span class="score-value">4.96 / 5.0</span>
            <span class="review-count-label">Based on 55 reviews</span>
        </div>
        <div class="rating-box">
            <img src="images/Vrbo.png" class="logo-vrbo" alt="Vrbo">
            <span class="score-value">10 / 10</span>
            <span class="review-count-label">Based on 69 reviews</span>
        </div>
    </div>
</div>

<section class="reviews-section">
    <div class="review-container" id="review-display">
        <div class="review-text active">"The kids had a blast in the game room and we loved the hot tub. Second time here!"<span class="reviewer-meta">— Raechel <span class="platform-source">via Airbnb</span></span></div>
        <div class="review-text">"10/10! Perfect for two separate families. Spotless and very responsive host."<span class="reviewer-meta">— Zoran <span class="platform-source">via Vrbo</span></span></div>
        <div class="review-text">"The arcade setup in the basement is fantastic! Kept the kids busy for hours while we relaxed."<span class="reviewer-meta">— Ryan <span class="platform-source">via Vrbo</span></span></div>
        <div class="review-text">"The house was spotless, had every amenity we could need and the hot tub/sauna were perfect."<span class="reviewer-meta">— Jennifer <span class="platform-source">via Airbnb</span></span></div>
        <div class="review-text">"Stunning property in a beautiful location. The private beach access is a huge plus."<span class="reviewer-meta">— Sarah <span class="platform-source">via Airbnb</span></span></div>
        <div class="review-text">"Excellent place to stay. Very clean and spacious. The hot tub was a favorite."<span class="reviewer-meta">— Jim <span class="platform-source">via Vrbo</span></span></div>
    </div>
</section>

<div class="container">
    <h2 style="text-align:center; color:var(--primary); font-size:2.5rem; margin-bottom:50px;">Photo Gallery</h2>
    
    <div class="filter-bar" id="category-filters">
        <button class="filter-btn active" onclick="filterGallery('All', this)">All Photos</button>
    </div>

    <div class="gallery-wrap" id="photo-grid"></div>
    <div style="text-align:center;">
        <button id="show-all-btn" class="more-photos-btn">Explore Full Gallery <i class="fa fa-arrow-right"></i></button>
    </div>
</div>

<div class="bottom-nav-bar">
    <a href="https://www.airbnb.ca/rooms/658827935035164558" class="action-link btn-airbnb" target="_blank"><i class="fab fa-airbnb"></i> Airbnb</a>
    <a href="https://www.vrbo.com/en-ca/cottage-rental/p9703894" class="action-link btn-vrbo" target="_blank"><i class="fas fa-home"></i> VRBO</a>
</div>

<div id="scroll-up" onclick="window.scrollTo(0,0)"><i class="fas fa-arrow-up"></i></div>

<div id="photo-overlay">
    <span style="position:absolute; top:30px; right:40px; color:white; font-size:4rem; cursor:pointer;" onclick="hideOverlay()">&times;</span>
    <span class="nav-arrow" style="left:20px;" onclick="navPhoto(-1)">&#10094;</span>
    <img id="full-img" src="">
    <span class="nav-arrow" style="right:20px;" onclick="navPhoto(1)">&#10095;</span>
</div>

<script>
    /* REPLACE THESE WITH YOUR GITHUB INFO */
    const GITHUB_USER = 'UnR34L-cloud'; 
    const GITHUB_REPO = 'The7Cs';

    let allPhotos = [];
    let activePhotoSet = [];
    let currentFilter = 'All';

    // 1. SMART SCAN: Ask GitHub for folders and images
    async function fetchGitHubGallery() {
        try {
            // Get sub-folders inside /images
            const folderRes = await fetch(`https://api.github.com/repos/${GITHUB_USER}/${GITHUB_REPO}/contents/images`);
            const folders = await folderRes.json();
            const filterBar = document.getElementById('category-filters');

            for (let folder of folders) {
                if (folder.type === 'dir') {
                    // Create Button for this folder
                    const btn = document.createElement('button');
                    btn.className = 'filter-btn';
                    btn.innerText = folder.name;
                    btn.onclick = () => filterGallery(folder.name, btn);
                    filterBar.appendChild(btn);

                    // Get images inside this specific folder
                    const imgRes = await fetch(folder.url);
                    const images = await imgRes.json();
                    
                    images.forEach(img => {
                        if (img.name.match(/\.(jpg|jpeg|png|webp)$/i)) {
                            allPhotos.push({ 
                                category: folder.name, 
                                url: img.download_url // Uses the direct raw link from GitHub
                            });
                        }
                    });
                }
            }
            renderPhotos();
            startSlideshow();
        } catch (err) {
            console.error("Error scanning GitHub folders:", err);
        }
    }

    // 2. RENDER LOGIC
    function renderPhotos() {
        const grid = document.getElementById('photo-grid');
        grid.innerHTML = '';
        activePhotoSet = currentFilter === 'All' ? allPhotos : allPhotos.filter(p => p.category === currentFilter);

        activePhotoSet.forEach((photo, idx) => {
            const img = document.createElement('img');
            img.src = photo.url;
            if (idx >= 6 && currentFilter === 'All') img.classList.add('hidden');
            img.onclick = () => showOverlay(idx);
            grid.appendChild(img);
        });
    }

    function filterGallery(category, btn) {
        currentFilter = category;
        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById('show-all-btn').style.display = (category === 'All') ? 'block' : 'none';
        renderPhotos();
    }

    // 3. SLIDESHOW (Starts after scan is done)
    let slideIdx = 0;
    function startSlideshow() {
        if(allPhotos.length === 0) return;
        const frame = document.getElementById('slideshow-anchor'), blur = document.getElementById('bg-blur-layer'), main = document.getElementById('featured-image');
        setInterval(() => {
            frame.classList.remove('active');
            setTimeout(() => {
                const current = allPhotos[slideIdx].url;
                blur.style.backgroundImage = `url('${current}')`;
                main.src = current;
                frame.classList.add('active');
                slideIdx = (slideIdx + 1) % Math.min(allPhotos.length, 15);
            }, 800);
        }, 7000);
        frame.classList.add('active'); // Initial start
        main.src = allPhotos[0].url;
        blur.style.backgroundImage = `url('${allPhotos[0].url}')`;
    }

    // 4. OVERLAY & UI
    let overlayIdx = 0;
    function showOverlay(i) { overlayIdx = i; document.getElementById('photo-overlay').style.display='flex'; document.getElementById('full-img').src = activePhotoSet[overlayIdx].url; document.body.style.overflow='hidden'; }
    function hideOverlay() { document.getElementById('photo-overlay').style.display='none'; document.body.style.overflow='auto'; }
    function navPhoto(step) { overlayIdx = (overlayIdx + step + activePhotoSet.length) % activePhotoSet.length; document.getElementById('full-img').src = activePhotoSet[overlayIdx].url; }

    window.onload = () => {
        fetchGitHubGallery();
        setInterval(() => {
            const revs = document.querySelectorAll('.review-text');
            let rI = [...revs].findIndex(r => r.classList.contains('active'));
            revs[rI].classList.remove('active');
            revs[(rI + 1) % revs.length].classList.add('active');
        }, 10000);
        document.getElementById('show-all-btn').onclick = function() {
            document.querySelectorAll('#photo-grid img.hidden').forEach(el => el.classList.remove('hidden'));
            this.style.display = 'none';
        };
    };

    window.onscroll = () => {
        const b = document.getElementById('scroll-up');
        if (window.pageYOffset > 600) b.classList.add('active'); else b.classList.remove('active');
    };
</script>
</body>
</html>